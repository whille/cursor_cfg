---
description: MCP 工具（@mcp.tool）的 docstring 文档规范，保证接口说明详细、结构统一
globs: script/mcp_server/**/*.py
alwaysApply: false
---

# MCP 接口文档规范

在 `script/mcp_server` 下通过 `@mcp.tool()` 注册的接口，其 docstring 必须按以下结构编写，便于 LLM 与调用方准确理解用途、参数与返回值。

## 必须包含的段落

1. **首行：工具名 + 一句话描述**
   - 格式：`<工具名>\n\n<一句话功能描述>。`
   - 示例：`raw_peak_node\n\n查询指定时间范围内的 peak_node_xihe 原始数据（晚高峰等）。`

2. **功能说明**
   - 标题：`功能说明：`
   - 用「-」列表说明主要行为、默认策略、可选行为差异等。
   - 示例：说明「默认按什么查」「传某参数时行为有何不同」等。

3. **参数详解**
   - 标题：`参数详解：`
   - 每个参数一行：`- <参数名>: <说明>（可选：默认值、格式、约束）`

4. **返回数据**
   - 标题：`返回数据：`
   - 说明类型与含义，例如：`Dict[str, Any] - 含 start/end、时间戳、data 列表及条数限制说明。`

5. **可选：注意事项**
   - 标题：`注意事项：`
   - 时区、条数限制、格式要求、依赖配置等可在此补充。

## 文档模板（复制后替换内容）

```python
@mcp.tool()
def tool_name(param_a: str, param_b: int) -> dict:
    """<工具名>

    <一句话描述>。

    功能说明：
    - <行为要点 1>。
    - <行为要点 2>（如：默认/指定某参数时的差异）。

    参数详解：
    - param_a: <说明>。
    - param_b: <说明>（可选：默认值或格式）。

    返回数据：
    <类型> - <含义简述>。
    """
```

## 参考样例（describe_node_slis 风格）

```
describe_node_slis

获取节点SLI列表。
功能说明：
- 根据服务树路径或节点ID获取该节点下的SLI指标列表。
- 默认使用full_name查询，可以获取节点及其子节点的SLI。
- 如果明确指定node_id，则只查询当前节点的SLI（不包含子节点）。
参数详解：
- full_name: 服务树路径，传此参数可以获取节点以及子节点的SLI（默认优先使用）。
- node_id: 服务树节点ID，传此参数只获取当前节点的SLI（不包含子节点）。
返回数据：
Dict[str, Any] - 返回节点SLI列表。
```

## 口诀

**MCP 工具文档：首行名+一句 → 功能说明 → 参数详解 → 返回数据 → 可选注意事项。**
