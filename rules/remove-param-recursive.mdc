---
description: 删除函数未使用参数时，必须递归向上修改所有调用方，避免漏改或只改一层
alwaysApply: true
---

# 删除参数时的递归修改规则

当要删除某个函数的某个「不再使用」的参数时，必须按以下流程做完整修改，不能只改定义或只改一层调用。

## 必须执行的步骤

1. **改定义**：在该函数的定义处去掉该参数（含函数签名与文档/类型注解若有）。
2. **找调用**：在项目内搜索所有调用该函数的地方（含本文件与其它文件）。
3. **改调用**：在每个调用处删除与该参数对应的实参（注意位置参数顺序或关键字参数名一致）。
4. **递归向上**：若某个调用者本身也只是「透传」该参数（即该调用者的某个参数仅用于传给下层，删除后变为未使用），则对该调用者重复步骤 1～3，直到整条调用链上不再出现新的未使用参数。

## 注意

- 递归时要先改「被调用方」再改「调用方」，避免中间状态编译/静态检查报错。
- 若调用方通过 `*args` / `**kwargs` 传参，需确认删除参数后传参逻辑仍正确，必要时改为显式参数。

## 简要口诀

**删参数 → 改定义 → 找全调用 → 改调用 → 对「仅透传」的调用者递归执行。**
